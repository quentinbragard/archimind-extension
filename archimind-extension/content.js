(function(){if(!window.location.hostname.includes("chatgpt.com"))return;try{const e=document.createElement("script");e.id="archimind-network-interceptor",e.src=chrome.runtime.getURL("injectedInterceptor.js"),(()=>{const n=document.head||document.documentElement||document.body;n?n.appendChild(e):console.error("❌ No target element available for script injection")})(),document.addEventListener("DOMContentLoaded",()=>{o()})}catch(e){console.error("❌ Error injecting interceptor:",e)}function o(){try{import(chrome.runtime.getURL("content-init.js")).then(t=>{const n=t.initialize||t.default&&t.default.initialize,i=t.cleanup||t.default&&t.default.cleanup;if(!n||typeof n!="function")throw new Error("❌ 'initialize' is not a function. Check module exports.");n().catch(r=>console.error("❌ Error during initialization:",r)),i&&typeof i=="function"&&(window.addEventListener("beforeunload",()=>{i()}),chrome.runtime.onMessage.addListener(r=>{r.action==="reinitialize"&&(i(),n().catch(c=>console.error("❌ Error during reinitialization:",c)))}))}).catch(t=>{console.error("❌ Failed to import module:",t)})}catch(e){console.error("❌ Error in content script:",e)}}})();
